{
    "AWSTemplateFormatVersion": "2010-09-09",
    ,
    "Description": "My Incsub IAC Project - Generated with AWS CloudFormer",
    "Resources": {
      "zonelocal": {
        "Type": "AWS::Route53::HostedZone",
        "Properties": {
          "Name": "local.",
          "HostedZoneConfig": {
            "Comment": "Created by AWS Cloud Map namespace with ARN arn:aws:servicediscovery:us-east-2:448067628045:namespace/ns-sygcsudhehivvqpj"
          }
        }
      },
      "dnsjriveraprojectservicelocal063fb42f3cd649549a4ff01274e3689a": {
        "Type": "AWS::Route53::RecordSetGroup",
        "Properties": {
          "HostedZoneId": {
            "Ref": "zonelocal"
          },
          "RecordSets": [
            {
              "Name": "jrivera-project-service.local.",
              "SetIdentifier": "063fb42f-3cd6-4954-9a4f-f01274e3689a",
              "Type": "SRV",
              "TTL": "60",
              "HealthCheckId": "ee00372c-43ce-45ba-a379-9c7efc364f08",
              "ResourceRecords": [
                "1 1 80 063fb42f-3cd6-4954-9a4f-f01274e3689a.jrivera-project-service.local."
              ]
            }
          ]
        }
      },
      "dns063fb42f3cd649549a4ff01274e3689ajriveraprojectservicelocal063fb42f3cd649549a4ff01274e3689a": {
        "Type": "AWS::Route53::RecordSetGroup",
        "Properties": {
          "HostedZoneId": {
            "Ref": "zonelocal"
          },
          "RecordSets": [
            {
              "Name": "063fb42f-3cd6-4954-9a4f-f01274e3689a.jrivera-project-service.local.",
              "SetIdentifier": "063fb42f-3cd6-4954-9a4f-f01274e3689a",
              "Type": "A",
              "TTL": "60",
              "HealthCheckId": "ee00372c-43ce-45ba-a379-9c7efc364f08",
              "ResourceRecords": [
                "10.0.0.11"
              ]
            }
          ]
        }
      },
      "vpc0130ae199ca091c25": {
        "Type": "AWS::EC2::VPC",
        "Properties": {
          "CidrBlock": "10.0.0.0/16",
          "InstanceTenancy": "default",
          "EnableDnsSupport": "true",
          "EnableDnsHostnames": "true"
        }
      },
      "subnet0c384c2264d2a8fbd": {
        "Type": "AWS::EC2::Subnet",
        "Properties": {
          "CidrBlock": "10.0.1.0/24",
          "AvailabilityZone": "us-east-2b",
          "VpcId": {
            "Ref": "vpc0130ae199ca091c25"
          }
        }
      },
      "subnet0feda22d257d168f1": {
        "Type": "AWS::EC2::Subnet",
        "Properties": {
          "CidrBlock": "10.0.0.0/24",
          "AvailabilityZone": "us-east-2a",
          "VpcId": {
            "Ref": "vpc0130ae199ca091c25"
          }
        }
      },
      "igw0af435fdeaf31ec84": {
        "Type": "AWS::EC2::InternetGateway",
        "Properties": {
        }
      },
      "dopt985eb0f3": {
        "Type": "AWS::EC2::DHCPOptions",
        "Properties": {
          "DomainName": "us-east-2.compute.internal",
          "DomainNameServers": [
            "AmazonProvidedDNS"
          ]
        }
      },
      "acl0485e56ad522ed957": {
        "Type": "AWS::EC2::NetworkAcl",
        "Properties": {
          "VpcId": {
            "Ref": "vpc0130ae199ca091c25"
          }
        }
      },
      "rtb0412c941b28fb11fc": {
        "Type": "AWS::EC2::RouteTable",
        "Properties": {
          "VpcId": {
            "Ref": "vpc0130ae199ca091c25"
          }
        }
      },
      "rtb0297db33bbd94b0fc": {
        "Type": "AWS::EC2::RouteTable",
        "Properties": {
          "VpcId": {
            "Ref": "vpc0130ae199ca091c25"
          }
        }
      },
      "asgEC2ContainerServicejriveraprojectclusterEcsInstanceAsgVMFFH9JR76K": {
        "Type": "AWS::AutoScaling::AutoScalingGroup",
        "Properties": {
          "AvailabilityZones": [
            "us-east-2a",
            "us-east-2b"
          ],
          "Cooldown": "300",
          "DesiredCapacity": "2",
          "HealthCheckGracePeriod": "0",
          "HealthCheckType": "EC2",
          "MaxSize": "2",
          "MinSize": "0",
          "VPCZoneIdentifier": [
            {
              "Ref": "subnet0c384c2264d2a8fbd"
            },
            {
              "Ref": "subnet0feda22d257d168f1"
            }
          ],
          "LaunchConfigurationName": {
            "Ref": "lcEC2ContainerServicejriveraprojectclusterEcsInstanceLcM6HT7MF2HGET"
          },
          "Tags": [
            {
              "Key": "Description",
              "Value": "This instance is the part of the Auto Scaling group which was created through ECS Console",
              "PropagateAtLaunch": true
            },
            {
              "Key": "Name",
              "Value": "ECS Instance - EC2ContainerService-jrivera-project-cluster",
              "PropagateAtLaunch": true
            }
          ],
          "TerminationPolicies": [
            "Default"
          ]
        }
      },
      "lcEC2ContainerServicejriveraprojectclusterEcsInstanceLcM6HT7MF2HGET": {
        "Type": "AWS::AutoScaling::LaunchConfiguration",
        "Properties": {
          "AssociatePublicIpAddress": true,
          "ImageId": "ami-06a8ae0ecd30e804c",
          "InstanceType": "t2.micro",
          "IamInstanceProfile": "arn:aws:iam::448067628045:instance-profile/ecsInstanceRole",
          "InstanceMonitoring": "true",
          "SecurityGroups": [
            {
              "Ref": "sgEC2ContainerServicejriveraprojectclusterEcsSecurityGroup19UOH424LJBPG"
            }
          ],
          "BlockDeviceMappings": [
            {
              "DeviceName": "/dev/xvdcz",
              "Ebs": {
                "VolumeSize": 22
              }
            }
          ]
        }
      },
      "sgjriveraprojectSGforALB": {
        "Type": "AWS::EC2::SecurityGroup",
        "Properties": {
          "GroupDescription": "jrivera-project-SGforALB",
          "VpcId": {
            "Ref": "vpc0130ae199ca091c25"
          }
        }
      },
      "sgdefault": {
        "Type": "AWS::EC2::SecurityGroup",
        "Properties": {
          "GroupDescription": "default VPC security group",
          "VpcId": {
            "Ref": "vpc0130ae199ca091c25"
          }
        }
      },
      "sgEC2ContainerServicejriveraprojectclusterEcsSecurityGroup19UOH424LJBPG": {
        "Type": "AWS::EC2::SecurityGroup",
        "Properties": {
          "GroupDescription": "ECS Allowed Ports",
          "VpcId": {
            "Ref": "vpc0130ae199ca091c25"
          }
        }
      },
      "alarmScaleInAlarm": {
        "Type": "AWS::CloudWatch::Alarm",
        "Properties": {
          "ActionsEnabled": "true",
          "ComparisonOperator": "LessThanOrEqualToThreshold",
          "EvaluationPeriods": "1",
          "MetricName": "CPUUtilization",
          "Namespace": "AWS/ECS",
          "Period": "1200",
          "Statistic": "Average",
          "Threshold": "40.0",
          "Unit": "Percent",
          "AlarmActions": [
            "arn:aws:autoscaling:us-east-2:448067628045:scalingPolicy:67e09ea8-6b79-4dd0-9edb-45cb276fa712:resource/ecs/service/jrivera-project-cluster/jrivera-project-service:policyName/ScaleInPolicy"
          ],
          "Dimensions": [
            {
              "Name": "ClusterName",
              "Value": "jrivera-project-cluster"
            },
            {
              "Name": "ServiceName",
              "Value": "jrivera-project-service"
            }
          ]
        }
      },
      "alarmScaleOutAlarm": {
        "Type": "AWS::CloudWatch::Alarm",
        "Properties": {
          "ActionsEnabled": "true",
          "ComparisonOperator": "GreaterThanOrEqualToThreshold",
          "EvaluationPeriods": "1",
          "MetricName": "CPUUtilization",
          "Namespace": "AWS/ECS",
          "Period": "60",
          "Statistic": "Average",
          "Threshold": "75.0",
          "Unit": "Percent",
          "AlarmActions": [
            "arn:aws:autoscaling:us-east-2:448067628045:scalingPolicy:67e09ea8-6b79-4dd0-9edb-45cb276fa712:resource/ecs/service/jrivera-project-cluster/jrivera-project-service:policyName/ScaleOutPolicy"
          ],
          "Dimensions": [
            {
              "Name": "ClusterName",
              "Value": "jrivera-project-cluster"
            },
            {
              "Name": "ServiceName",
              "Value": "jrivera-project-service"
            }
          ]
        }
      },
      "acl1": {
        "Type": "AWS::EC2::NetworkAclEntry",
        "Properties": {
          "CidrBlock": "0.0.0.0/0",
          "Egress": "true",
          "Protocol": "-1",
          "RuleAction": "allow",
          "RuleNumber": "100",
          "NetworkAclId": {
            "Ref": "acl0485e56ad522ed957"
          }
        }
      },
      "acl2": {
        "Type": "AWS::EC2::NetworkAclEntry",
        "Properties": {
          "CidrBlock": "0.0.0.0/0",
          "Protocol": "-1",
          "RuleAction": "allow",
          "RuleNumber": "100",
          "NetworkAclId": {
            "Ref": "acl0485e56ad522ed957"
          }
        }
      },
      "subnetacl1": {
        "Type": "AWS::EC2::SubnetNetworkAclAssociation",
        "Properties": {
          "NetworkAclId": {
            "Ref": "acl0485e56ad522ed957"
          },
          "SubnetId": {
            "Ref": "subnet0c384c2264d2a8fbd"
          }
        }
      },
      "subnetacl2": {
        "Type": "AWS::EC2::SubnetNetworkAclAssociation",
        "Properties": {
          "NetworkAclId": {
            "Ref": "acl0485e56ad522ed957"
          },
          "SubnetId": {
            "Ref": "subnet0feda22d257d168f1"
          }
        }
      },
      "gw1": {
        "Type": "AWS::EC2::VPCGatewayAttachment",
        "Properties": {
          "VpcId": {
            "Ref": "vpc0130ae199ca091c25"
          },
          "InternetGatewayId": {
            "Ref": "igw0af435fdeaf31ec84"
          }
        }
      },
      "subnetroute1": {
        "Type": "AWS::EC2::SubnetRouteTableAssociation",
        "Properties": {
          "RouteTableId": {
            "Ref": "rtb0412c941b28fb11fc"
          },
          "SubnetId": {
            "Ref": "subnet0c384c2264d2a8fbd"
          }
        }
      },
      "subnetroute2": {
        "Type": "AWS::EC2::SubnetRouteTableAssociation",
        "Properties": {
          "RouteTableId": {
            "Ref": "rtb0412c941b28fb11fc"
          },
          "SubnetId": {
            "Ref": "subnet0feda22d257d168f1"
          }
        }
      },
      "route1": {
        "Type": "AWS::EC2::Route",
        "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "RouteTableId": {
            "Ref": "rtb0412c941b28fb11fc"
          },
          "GatewayId": {
            "Ref": "igw0af435fdeaf31ec84"
          }
        },
        "DependsOn": "gw1"
      },
      "dchpassoc1": {
        "Type": "AWS::EC2::VPCDHCPOptionsAssociation",
        "Properties": {
          "VpcId": {
            "Ref": "vpc0130ae199ca091c25"
          },
          "DhcpOptionsId": {
            "Ref": "dopt985eb0f3"
          }
        }
      },
      "ingress1": {
        "Type": "AWS::EC2::SecurityGroupIngress",
        "Properties": {
          "GroupId": {
            "Ref": "sgjriveraprojectSGforALB"
          },
          "IpProtocol": "tcp",
          "FromPort": "80",
          "ToPort": "80",
          "CidrIp": "0.0.0.0/0"
        }
      },
      "ingress2": {
        "Type": "AWS::EC2::SecurityGroupIngress",
        "Properties": {
          "GroupId": {
            "Ref": "sgjriveraprojectSGforALB"
          },
          "IpProtocol": "tcp",
          "FromPort": "443",
          "ToPort": "443",
          "CidrIp": "0.0.0.0/0"
        }
      },
      "ingress3": {
        "Type": "AWS::EC2::SecurityGroupIngress",
        "Properties": {
          "GroupId": {
            "Ref": "sgdefault"
          },
          "IpProtocol": "-1",
          "SourceSecurityGroupId": {
            "Ref": "sgdefault"
          },
          "SourceSecurityGroupOwnerId": "448067628045"
        }
      },
      "ingress4": {
        "Type": "AWS::EC2::SecurityGroupIngress",
        "Properties": {
          "GroupId": {
            "Ref": "sgEC2ContainerServicejriveraprojectclusterEcsSecurityGroup19UOH424LJBPG"
          },
          "IpProtocol": "tcp",
          "FromPort": "80",
          "ToPort": "80",
          "CidrIp": "0.0.0.0/0"
        }
      },
      "egress1": {
        "Type": "AWS::EC2::SecurityGroupEgress",
        "Properties": {
          "GroupId": {
            "Ref": "sgjriveraprojectSGforALB"
          },
          "IpProtocol": "-1",
          "CidrIp": "0.0.0.0/0"
        }
      },
      "egress2": {
        "Type": "AWS::EC2::SecurityGroupEgress",
        "Properties": {
          "GroupId": {
            "Ref": "sgdefault"
          },
          "IpProtocol": "-1",
          "CidrIp": "0.0.0.0/0"
        }
      },
      "egress3": {
        "Type": "AWS::EC2::SecurityGroupEgress",
        "Properties": {
          "GroupId": {
            "Ref": "sgEC2ContainerServicejriveraprojectclusterEcsSecurityGroup19UOH424LJBPG"
          },
          "IpProtocol": "-1",
          "CidrIp": "0.0.0.0/0"
        }
      }
    }
  }